"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[337],{96337:function(e,n,s){s.r(n),s.d(n,{default:function(){return M}});var a=s(75952),r=s(26445),i=s(39124),t=s(43896),o=s(64554),l=s(38072),c=s(73024),d=s(85703),u=s(32988),m=s(25212),h=s(53026),p=s(37473),x=s(29439),v=s(72791),j=s(61889),Z=s(53767),g=s(57621),f=s(20890),w=s(36151),b=s(80184);var y=s(10703),P=s(13400),k=s(56125),S=s(27760),C=s(39709),_=s(5977);function N(e){var n=e.cards,s=e.isOpen,a=e.onOpen,r=e.onCancel;return(0,b.jsxs)(g.Z,{sx:{p:3},children:[(0,b.jsx)(f.Z,{variant:"overline",sx:{mb:3,display:"block",color:"text.secondary"},children:"Payment Method"}),(0,b.jsx)(Z.Z,{spacing:2,direction:{xs:"column",md:"row"},children:n.map((function(e){return(0,b.jsxs)(y.Z,{sx:{p:3,width:1,position:"relative",border:function(e){return"solid 1px ".concat(e.palette.grey[50032])}},children:[(0,b.jsx)(_.Z,{alt:"icon",src:"master_card"===e.cardType?"https://minimal-assets-api.vercel.app/assets/icons/ic_mastercard.svg":"https://minimal-assets-api.vercel.app/assets/icons/ic_visa.svg",sx:{mb:1,maxWidth:36}}),(0,b.jsx)(f.Z,{variant:"subtitle2",children:e.cardNumber}),(0,b.jsx)(P.Z,{sx:{top:8,right:8,position:"absolute"},children:(0,b.jsx)(h.Z,{icon:"eva:more-vertical-fill",width:20,height:20})})]},e.id)}))}),(0,b.jsx)(o.Z,{sx:{mt:3},children:(0,b.jsx)(w.Z,{size:"small",startIcon:(0,b.jsx)(h.Z,{icon:"eva:plus-fill"}),onClick:a,children:"Add new card"})}),(0,b.jsx)(k.Z,{in:s,children:(0,b.jsx)(o.Z,{sx:{padding:3,marginTop:3,borderRadius:1,bgcolor:"background.neutral"},children:(0,b.jsxs)(Z.Z,{spacing:3,children:[(0,b.jsx)(f.Z,{variant:"subtitle1",children:"Add new card"}),(0,b.jsxs)(Z.Z,{direction:{xs:"column",sm:"row"},spacing:2,children:[(0,b.jsx)(S.Z,{fullWidth:!0,label:"Name on card"}),(0,b.jsx)(S.Z,{fullWidth:!0,label:"Card number"})]}),(0,b.jsxs)(Z.Z,{direction:{xs:"column",sm:"row"},spacing:2,children:[(0,b.jsx)(S.Z,{fullWidth:!0,label:"Expiration date",placeholder:"MM/YY"}),(0,b.jsx)(S.Z,{fullWidth:!0,label:"Cvv"})]}),(0,b.jsxs)(Z.Z,{direction:"row",justifyContent:"flex-end",spacing:1.5,children:[(0,b.jsx)(w.Z,{color:"inherit",variant:"outlined",onClick:r,children:"Cancel"}),(0,b.jsx)(C.Z,{type:"submit",variant:"contained",onClick:r,children:"Save Change"})]})]})})})]})}var O=s(7870);var R=s(17834);function q(e){var n=e.cards,s=(e.addressBook,e.invoices,(0,v.useState)(!1)),a=(0,x.Z)(s,2),r=a[0],i=a[1],t=(0,R.Z)().user;return console.log("user.plan",t),(0,b.jsxs)(j.ZP,{container:!0,spacing:5,children:[(0,b.jsx)(j.ZP,{item:!0,xs:12,md:8,children:(0,b.jsxs)(Z.Z,{spacing:3,children:[(0,b.jsxs)(g.Z,{sx:{p:3},children:[(0,b.jsx)(f.Z,{variant:"overline",sx:{mb:3,display:"block",color:"text.secondary"},children:"Your Plan"}),(0,b.jsx)(f.Z,{variant:"h4",children:(null===t||void 0===t?void 0:t.user_plan.toUpperCase())||""}),(0,b.jsxs)(o.Z,{sx:{mt:{xs:2,sm:0},position:{sm:"absolute"},top:{sm:24},right:{sm:24}},children:[(0,b.jsx)(w.Z,{size:"small",color:"inherit",variant:"outlined",sx:{mr:1},children:"Cancel plan"}),(0,b.jsx)(w.Z,{size:"small",variant:"outlined",children:"Upgrade plan"})]})]}),(0,b.jsx)(N,{cards:n,isOpen:r,onOpen:function(){return i(!r)},onCancel:function(){return i(!1)}})]})}),(0,b.jsx)(j.ZP,{item:!0,xs:12,md:4})]})}var I=s(15861),U=s(87757),A=s.n(U),T=s(62797),W=s(98246),z=(s(5483),s(8352),s(61265)),B=s(61134),L=s(49005),V=s(89731);function D(){var e=(0,W.Ds)().enqueueSnackbar,n=T.Ry().shape({oldPassword:T.Z_().required("Old Password is required"),newPassword:T.Z_().min(6,"Password must be at least 6 characters").required("New Password is required"),confirmNewPassword:T.Z_().oneOf([T.iH("newPassword"),null],"Passwords must match")}),s=(0,B.cI)({resolver:(0,z.X)(n),defaultValues:{oldPassword:"",newPassword:"",confirmNewPassword:""}}),a=s.reset,r=s.handleSubmit,i=s.formState.isSubmitting,t=function(){var n=(0,I.Z)(A().mark((function n(s){var r,i;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{r=window.localStorage.getItem("accessToken"),V.Z.defaults.headers.common={authorization:"".concat(r)},i=JSON.parse(window.localStorage.getItem("user")).id,V.Z.put("/auth/update-all/".concat(i),{oldPassword:s.oldPassword,password:s.newPassword}).then((function(n){e("Password changed successfully!")})).catch((function(n){e(n.error,{variant:"error"})})).finally((function(e){a()}))}catch(t){console.error(t)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,b.jsx)(g.Z,{sx:{p:3,maxWidth:800},children:(0,b.jsx)(L.RV,{methods:s,onSubmit:r(t),children:(0,b.jsxs)(Z.Z,{spacing:3,alignItems:"flex-mid",children:[(0,b.jsx)(L.au,{name:"oldPassword",type:"password",label:"Old Password"}),(0,b.jsx)(L.au,{name:"newPassword",type:"password",label:"New Password"}),(0,b.jsx)(L.au,{name:"confirmNewPassword",type:"password",label:"Confirm New Password"}),(0,b.jsx)("center",{children:(0,b.jsx)(C.Z,{type:"submit",variant:"contained",loading:i,children:"Save Changes"})})]})})})}function G(){var e=(0,W.Ds)().enqueueSnackbar,n=(0,R.Z)().user,s=T.Ry().shape({email:T.Z_().required("Name is required")}),a={firstname:(null===n||void 0===n?void 0:n.firstname)||"",lastname:(null===n||void 0===n?void 0:n.lastname)||"",email:(null===n||void 0===n?void 0:n.email)||"",image_url:(null===n||void 0===n?void 0:n.photoURL)||"https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcSUe2eaB9QYVkoJORkwnG2yfpPRqpqvRyUkWXOfvLOirm1mudvx",phoneNumber:(null===n||void 0===n?void 0:n.phoneNumber)||"",country:(null===n||void 0===n?void 0:n.country)||""},r=(0,B.cI)({resolver:(0,z.X)(s),defaultValues:a}),i=r.reset,t=r.setValue,l=r.handleSubmit,c=r.formState.isSubmitting,d=function(){var n=(0,I.Z)(A().mark((function n(s){var a,r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=window.localStorage.getItem("accessToken"),V.Z.defaults.headers.common={authorization:"".concat(a)},r=JSON.parse(window.localStorage.getItem("user")).id,V.Z.put("/auth/update-all/".concat(r),s).then((function(n){e("Data edit success!")})).catch((function(n){401===n.response.status&&(e("Unauthorized!",{variant:"error"}),window.localStorage.removeItem("accessToken").then((function(e){}))),400===n.response.status&&e("Wrong Code!",{variant:"error"})})).finally((function(){i()}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),m=(0,v.useCallback)((function(e){var n=e[0];n&&t("photoURL",Object.assign(n,{preview:URL.createObjectURL(n)}))}),[t]);return(0,b.jsx)(L.RV,{methods:r,onSubmit:l(d),children:(0,b.jsxs)(j.ZP,{container:!0,spacing:3,children:[(0,b.jsx)(j.ZP,{item:!0,xs:12,md:4,children:(0,b.jsx)(g.Z,{sx:{py:10,px:3,textAlign:"center"},children:(0,b.jsx)(L.sX,{name:"image_url",accept:"image/*",maxSize:3145728,onDrop:m,helperText:(0,b.jsxs)(f.Z,{variant:"caption",sx:{mt:2,mx:"auto",display:"block",textAlign:"center",color:"text.secondary"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",(0,b.jsx)("br",{})," max size of ",(0,O.oe)(3145728)]})})})}),(0,b.jsx)(j.ZP,{item:!0,xs:12,md:8,children:(0,b.jsxs)(g.Z,{sx:{p:3},style:{height:"100%",paddingTop:"62px"},children:[(0,b.jsxs)(o.Z,{sx:{display:"grid",rowGap:3,columnGap:2,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,b.jsx)(L.au,{name:"firstname",label:"First Name"}),(0,b.jsx)(L.au,{name:"lastname",label:"Last Name"}),(0,b.jsx)(L.au,{name:"email",label:"Email Address"}),(0,b.jsxs)(L.Cc,{name:"country",label:"Country",placeholder:"Country",children:[(0,b.jsx)("option",{value:""}),u.hW.map((function(e){return(0,b.jsx)("option",{value:e.label,children:e.label},e.code)}))]})]}),(0,b.jsx)(Z.Z,{spacing:3,alignItems:"flex-mid",sx:{mt:3},children:(0,b.jsx)("center",{children:(0,b.jsx)(C.Z,{type:"submit",variant:"contained",loading:c,children:"Save Changes"})})})]})})]})})}h.Z,h.Z,h.Z,h.Z;function M(){var e=(0,d.Z)().themeStretch,n=(0,c.Z)("general"),s=n.currentTab,x=n.onChangeTab,v=[{value:"general",icon:(0,b.jsx)(h.Z,{icon:"ic:round-account-box",width:20,height:20}),component:(0,b.jsx)(G,{})},{value:"billing",icon:(0,b.jsx)(h.Z,{icon:"ic:round-receipt",width:20,height:20}),component:(0,b.jsx)(q,{cards:u.Po,addressBook:u.n,invoices:u.aH})},{value:"change_password",icon:(0,b.jsx)(h.Z,{icon:"ic:round-vpn-key",width:20,height:20}),component:(0,b.jsx)(D,{})}];return(0,b.jsx)(m.Z,{title:"User: Account Settings",children:(0,b.jsxs)(r.Z,{maxWidth:!e&&"lg",children:[(0,b.jsx)(p.Z,{heading:"Account",links:[{name:"Dashboard",href:l.vB.root},{name:"User",href:l.vB.user.root},{name:"Account Settings"}]}),(0,b.jsx)(i.Z,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:s,onChange:x,children:v.map((function(e){return(0,b.jsx)(t.Z,{disableRipple:!0,label:(0,a.I)(e.value),icon:e.icon,value:e.value},e.value)}))}),(0,b.jsx)(o.Z,{sx:{mb:5}}),v.map((function(e){return e.value===s&&(0,b.jsx)(o.Z,{children:e.component},e.value)}))]})})}}}]);
//# sourceMappingURL=337.d29a135a.chunk.js.map