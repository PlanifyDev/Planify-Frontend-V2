"use strict";(self.webpackChunk_minimal_minimal_kit_react=self.webpackChunk_minimal_minimal_kit_react||[]).push([[685],{57685:function(e,n,t){t.r(n),t.d(n,{default:function(){return z}});var o=t(97890),r=t(29466),i=t(7861),a=t(31881),c=t.n(a),s=t(58908),d=t(88564),l=t(43265),u=t(57829),h=t(69099),m=t(61113),f=t(47723),v=t(33896),g=t(48175),p=t(71361),x=t(42593),Z=t(1413),w=t(15861),j=t(87757),b=t.n(j),k=t(28089),y=t(47313),q=t(75627),C=t(1432),S=t(35898),_=t(49914),E=t(32703),I=t(46417);function T(){var e=(0,o.s0)(),n=(0,s.Ds)().enqueueSnackbar,t=k.Ry().shape({code1:k.Z_().required("Code is required"),code2:k.Z_().required("Code is required"),code3:k.Z_().required("Code is required"),code4:k.Z_().required("Code is required"),code5:k.Z_().required("Code is required"),code6:k.Z_().required("Code is required")}),r=(0,q.cI)({mode:"onBlur",resolver:(0,C.X)(t),defaultValues:{code1:"",code2:"",code3:"",code4:"",code5:"",code6:""}}),a=r.watch,d=r.control,l=r.setValue,u=r.handleSubmit,h=r.formState,m=h.isSubmitting,f=h.isValid,v=a();(0,y.useEffect)((function(){document.addEventListener("paste",x)}),[]);var p=function(){var t=(0,w.Z)(b().mark((function t(o){var r,a,s;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=window.localStorage.getItem("accessToken"),a=null,r&&(a=(0,i.Z)(r).userId),a&&r||(n("Please login again!",{variant:"error"}),window.localStorage.removeItem("accessToken"),e(g.EE.login,{replace:!0})),s=Object.values(o).join(""),c().defaults.headers.common={authorization:"".concat(r)},c().put("http://localhost:3000/verify/".concat(a),{verificationCode:s}).then((function(t){n("Verify success!");var o=t.data.jwt;window.localStorage.setItem("accessToken",o),e(g.vB.root,{replace:!0})})).catch((function(t){401===t.response.status&&(n("Unauthorized!",{variant:"error"}),window.localStorage.removeItem("accessToken").then((function(n){e(g.EE.login,{replace:!0})}))),400===t.response.status&&n("Wrong Code!",{variant:"error"})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(e){var n,t=(null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text"))||"";t=t.split(""),[].forEach.call(document.querySelectorAll("#field-code"),(function(e,n){e.value=t[n];var o="code".concat(n+1);l(o,t[n])}))};return(0,I.jsxs)("form",{onSubmit:u(p),children:[(0,I.jsx)(S.Z,{direction:"row",spacing:2,justifyContent:"center",children:Object.keys(v).map((function(e,n){return(0,I.jsx)(q.Qr,{name:"code".concat(n+1),control:d,render:function(e){var t=e.field;return(0,I.jsx)(_.Z,(0,Z.Z)((0,Z.Z)({},t),{},{id:"field-code",autoFocus:0===n,placeholder:"-",onChange:function(e){return function(e,n){var t=e.target,o=t.maxLength,r=t.value,i=t.name.replace("code",""),a=Number(i);if(r.length>=o&&a<6){var c=document.querySelector("input[name=code".concat(a+1,"]"));null!==c&&c.focus()}n(e)}(e,t.onChange)},inputProps:{maxLength:1,sx:{p:0,textAlign:"center",width:{xs:36,sm:56},height:{xs:36,sm:56}}}}))}},e)}))}),(0,I.jsx)(E.Z,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,disabled:!f,sx:{mt:3},children:"Verify"})]})}var V=(0,d.ZP)("div")((function(e){return{display:"flex",height:"100%",alignItems:"center",padding:e.theme.spacing(12,0)}}));function z(){var e=(0,o.s0)(),n=(0,s.Ds)().enqueueSnackbar;return(0,I.jsx)(p.Z,{title:"Verify",sx:{height:1},children:(0,I.jsxs)(V,{children:[(0,I.jsx)(v.Z,{}),(0,I.jsx)(l.Z,{children:(0,I.jsxs)(u.Z,{sx:{maxWidth:480,mx:"auto"},children:[(0,I.jsx)(h.Z,{size:"small",component:r.rU,to:g.EE.login,startIcon:(0,I.jsx)(x.Z,{icon:"eva:arrow-ios-back-fill",width:20,height:20}),sx:{mb:3},onClick:function(){window.localStorage.removeItem("accessToken").then(e(g.EE.login))},children:"Back"}),(0,I.jsx)(m.Z,{variant:"h3",paragraph:!0,children:"Please check your email!"}),(0,I.jsx)(m.Z,{sx:{color:"text.secondary"},children:"We have emailed a 6-digit confirmation code to acb@domain, please enter the code in below box to verify your email."}),(0,I.jsx)(u.Z,{sx:{mt:5,mb:3},children:(0,I.jsx)(T,{})}),(0,I.jsxs)(m.Z,{variant:"body2",align:"center",children:["Don\u2019t have a code? \xa0",(0,I.jsx)(f.Z,{variant:"subtitle2",underline:"none",style:{cursor:"pointer"},onClick:function(){var t=window.localStorage.getItem("accessToken");c().defaults.headers.common={authorization:"".concat(t)};var o=(0,i.Z)(t).userId;c().get("http://localhost:3000/resend-verification/".concat(o)).then((function(e){n("Verification code sent",{variant:"success"})})).catch((function(t){n("Something went wrong",{variant:"error"}),e(g.EE.login)}))},children:"Resend code"})]})]})})]})})}}}]);